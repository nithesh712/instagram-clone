(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},62:function(e,t,a){e.exports=a(82)},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(19),r=a.n(o),c=(a(67),a(3)),i=(a(68),a(69),a(98)),s=a(96),u=a(52),m=a.n(u),d=a(56),p=a.n(d),f=a(54),h=a.n(f),g=a(53),E=a.n(g),b=a(55),v=a.n(b),_=a(4),y=a(5),j=a(97);var O=function(){var e=Object(n.useContext)(V),t=e.state,a=e.dispatch,o=Object(_.f)();return l.a.createElement("div",{className:"navbar"},l.a.createElement("div",{className:"navbar__left"},l.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png",alt:""})),l.a.createElement("div",{className:"navbar__right"},t?[l.a.createElement(y.b,{className:"navbar__link"},l.a.createElement(j.a,null)),l.a.createElement(y.b,{className:"navbar__link",to:"/followersposts"},l.a.createElement(m.a,null)),l.a.createElement(y.b,{className:"navbar__link",to:"/createpost"},l.a.createElement(E.a,null)),l.a.createElement(y.b,{className:"navbar__link",to:"/"},l.a.createElement(h.a,null)),l.a.createElement(y.b,{className:"navbar__link",to:"/profile"},l.a.createElement(i.a,{src:t?t.pic:"Loading",alt:""})),l.a.createElement(s.a,{onClick:function(){localStorage.clear(),a({type:"CLEAR"}),o.push("/signin")},className:"navbar__link"},l.a.createElement(v.a,null))]:[l.a.createElement(y.b,{className:"navbar__link",to:"/signup"},l.a.createElement(p.a,null))]))},N=(a(44),a(32)),w=a.n(N),S=a(31),k=a.n(S),x=a(33),C=a.n(x),I=a(34),A=a.n(I),B=a(30),z=a.n(B);var J=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useContext)(V),i=r.state;return r.dispatch,Object(n.useEffect)((function(){fetch("/posts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){o(e.posts)}))}),[]),l.a.createElement("div",{className:"container"},a.map((function(e){return l.a.createElement("div",{key:e._id,className:"container__main"},l.a.createElement("div",{className:"container__header"},l.a.createElement("img",{src:e.postedBy.pic,alt:""}),l.a.createElement("h6",null,l.a.createElement(y.b,{to:e.postedBy._id!==i._id?"/profile/".concat(e.postedBy._id):"/profile"},e.postedBy.name)),e.postedBy._id===i._id&&l.a.createElement(z.a,{style:{cursor:"pointer"},onClick:function(){return t=e._id,void fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.filter((function(t){return t._id!==e._id}));o(t)}));var t}})),l.a.createElement("div",{className:"container__body"},l.a.createElement("img",{src:e.photo,alt:""}),l.a.createElement("div",{className:"container__bodyIcons"},e.likes.includes(i._id)?l.a.createElement(k.a,{color:"secondary",onClick:function(){var t;t=e._id,fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){console.log(e)}))}}):l.a.createElement(w.a,{onClick:function(){var t;t=e._id,fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){console.log(e)}))}}),l.a.createElement(C.a,null),l.a.createElement(A.a,null)),l.a.createElement("h6",null,e.likes.length," Likes"),l.a.createElement("h6",null,e.title),l.a.createElement("p",null,e.body),e.comments.map((function(e){return l.a.createElement("h6",{key:e._id},l.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy.name)," ",e.text)})),l.a.createElement("hr",null),l.a.createElement("form",{onSubmit:function(t){var n,l;t.preventDefault(),n=t.target[0].value,l=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:l,text:n})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){console.log(e)}))},className:"container__bodyFooter"},l.a.createElement("input",{type:"text",placeholder:"Add a comment..."}),l.a.createElement(s.a,null,"Post"))))})))};a(79);var P=function(){return l.a.createElement("div",{className:"home"},l.a.createElement(J,null))};a(45);var T=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(""),i=Object(c.a)(r,2),s=(i[0],i[1],Object(n.useContext)(V)),u=s.state;return s.dispatch,Object(n.useEffect)((function(){fetch("/myposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){o(e)}))}),[]),l.a.createElement("div",{className:"profile"},l.a.createElement("div",{className:"profile__div1"},l.a.createElement("div",{className:"profile__info"},l.a.createElement("img",{className:"profile__image",src:u?u.pic:"Loading",alt:""})),l.a.createElement("div",null,l.a.createElement("h4",null,u?u.name:"Loading..."),l.a.createElement("h4",null,u?u.email:"Loading..."),l.a.createElement("div",{className:"profile__details"},l.a.createElement("h6",null,a.length," Posts"),l.a.createElement("h6",null,u?u.followers.length:"0"," Followers"),l.a.createElement("h6",null,u?u.following.length:"0"," Following")))),l.a.createElement("hr",null),l.a.createElement("div",{className:"profile__div2"},a.map((function(e){return l.a.createElement("img",{className:"profile__images",key:e._id,src:e.photo,alt:""})}))))},R=(a(46),a(13)),D=a.n(R);var F=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(""),i=Object(c.a)(r,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)(""),E=Object(c.a)(g,2),b=E[0],v=E[1],j=Object(n.useState)(void 0),O=Object(c.a)(j,2),N=O[0],w=O[1],S=Object(_.f)();Object(n.useEffect)((function(){N&&k()}),[N]);var k=function(){if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(f))return D.a.toast({html:"Invalid Email",classes:"b9f6ca red darken-3"});fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:f,password:u,pic:N})}).then((function(e){return e.json()})).then((function(e){e.error?D.a.toast({html:e.error,classes:"#b71c1c red darken-3"}):(D.a.toast({html:e.message,classes:"#388 green darken-2"}),S.push("/signin"))})).catch((function(e){console.log(e)}))},x=function(){b?function(){var e=new FormData;e.append("file",b),e.append("upload_preset","instagram"),e.append("cloud_name","dmxlnl9ee"),fetch("https://api.cloudinary.com/v1_1/dmxlnl9ee/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){w(e.url)})).catch((function(e){console.log(e)}))}():k()};return l.a.createElement("div",{className:"signin"},l.a.createElement("div",{className:"signin__card"},l.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png",alt:""}),l.a.createElement("div",{className:"signin__input"},l.a.createElement("input",{type:"text",placeholder:"Username",value:a,onChange:function(e){return o(e.target.value)},style:{border:"1px solid black",height:"30px",borderRadius:"5px",textAlign:"center"}}),l.a.createElement("input",{type:"email",placeholder:"Email",value:f,onChange:function(e){return h(e.target.value)},style:{border:"1px solid black",height:"30px",borderRadius:"5px",textAlign:"center"}}),l.a.createElement("input",{type:"password",placeholder:"Password",value:u,onChange:function(e){return m(e.target.value)},style:{border:"1px solid black",height:"30px",borderRadius:"5px",textAlign:"center"}})),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn #0095f6 blue darken-1"},l.a.createElement("span",null,"Upload Image"),l.a.createElement("input",{onChange:function(e){return v(e.target.files[0])},type:"file"})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement(s.a,{onClick:function(){return x()},variant:"contained",color:"primary",className:"signin__button"},"Signup"),l.a.createElement("p",{className:"signin__pera"},"Already Have an Account?"," ",l.a.createElement(y.b,{to:"/signin",className:"signin__link"},"Signin"))))};var L=function(){var e=Object(n.useContext)(V),t=(e.state,e.dispatch),a=Object(n.useState)(""),o=Object(c.a)(a,2),r=o[0],i=o[1],u=Object(n.useState)(""),m=Object(c.a)(u,2),d=m[0],p=m[1],f=Object(_.f)();return l.a.createElement("div",{className:"signin"},l.a.createElement("div",{className:"signin__card"},l.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png",alt:""}),l.a.createElement("div",{className:"signin__input"},l.a.createElement("input",{type:"email",placeholder:"Email",value:d,onChange:function(e){return p(e.target.value)},style:{border:"1px solid black",height:"30px",borderRadius:"5px",textAlign:"center"}}),l.a.createElement("input",{placeholder:"Password",type:"password",value:r,onChange:function(e){return i(e.target.value)},style:{border:"1px solid black",height:"30px",borderRadius:"5px",textAlign:"center"}})),l.a.createElement(s.a,{onClick:function(){return function(){if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(d))return D.a.toast({html:"Invalid Email",classes:"#b9f6ca red darken-3"});fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:r})}).then((function(e){return e.json()})).then((function(e){e.error?D.a.toast({html:e.error,classes:"#b71c1c red darken-3"}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),D.a.toast({html:"Signin Success",classes:"#388 green darken-2"}),f.push("/"))})).catch((function(e){console.log(e)}))}()},variant:"contained",color:"primary",className:"signin__button"},"Signin"),l.a.createElement("p",{className:"signin__pera"},"Dont Have an Account?"," ",l.a.createElement(y.b,{to:"/signup",className:"signin__link"},"Signup"))))},U=a(59),Z=a(17),W=(a(80),a(57)),$=a.n(W),H=a(58),M=a.n(H);var q=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useContext)(V),i=r.state,u=r.dispatch,m=Object(_.g)().userid,d=Object(n.useState)(!i||i.followers.includes(m)),p=Object(c.a)(d,2),f=p[0],h=p[1];return Object(n.useEffect)((function(){fetch("/user/".concat(m),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){o(e)}))}),[]),l.a.createElement(l.a.Fragment,null,a?l.a.createElement("div",{className:"profile"},l.a.createElement("div",{className:"profile__div1"},l.a.createElement("div",null,l.a.createElement("img",{className:"profile__image",src:a.user.pic,alt:""})),l.a.createElement("div",null,l.a.createElement("h4",null,a.user.name),l.a.createElement("h4",null,a.user.email),l.a.createElement("div",{className:"profile__details"},l.a.createElement("h6",null,a.posts.length," Posts"),l.a.createElement("h6",null,a.user.followers.length," Followers"),l.a.createElement("h6",null,a.user.following.length," Following")),l.a.createElement("div",{className:"profile__buttons"},f?l.a.createElement(s.a,{onClick:function(){fetch("/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:m})}).then((function(e){return e.json()})).then((function(e){console.log(e),u({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),o((function(t){return Object(Z.a)({},t,{user:Object(Z.a)({},t.user,{followers:[].concat(Object(U.a)(t.user.followers),[e._id])})})})),h(!1)}))}},l.a.createElement($.a,{color:"primary"})):l.a.createElement(s.a,{onClick:function(){fetch("/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unfollowId:m})}).then((function(e){return e.json()})).then((function(e){console.log(e),u({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),o((function(t){var a=t.user.followers.filter((function(t){return t!=e._id}));return Object(Z.a)({},t,{user:Object(Z.a)({},t.user,{followers:a})})})),h(!0)}))}},l.a.createElement(M.a,{color:"secondary"}))))),l.a.createElement("hr",null),l.a.createElement("div",{className:"profile__div2"},a.posts.map((function(e){return l.a.createElement("img",{key:e._id,src:e.photo,alt:""})})))):l.a.createElement("h2",null,"Loading...."))};a(81);var G=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(""),i=Object(c.a)(r,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)(""),E=Object(c.a)(g,2),b=E[0],v=E[1],y=Object(_.f)();return Object(n.useEffect)((function(){b&&fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:a,body:u,pic:b})}).then((function(e){return e.json()})).then((function(e){e.error?D.a.toast({html:e.error,classes:"#b71c1c red darken-3"}):(D.a.toast({html:"Created Success",classes:"#388 green darken-2"}),y.push("/"))})).catch((function(e){console.log(e)}))}),[b]),l.a.createElement("div",{className:"createPost"},l.a.createElement("h3",null,"New Post"),l.a.createElement("input",{value:a,onChange:function(e){return o(e.target.value)},type:"text",placeholder:"Title"}),l.a.createElement("input",{value:u,onChange:function(e){return m(e.target.value)},type:"text",placeholder:"Description"}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn #0095f6 blue darken-1"},l.a.createElement("span",null,"Upload"),l.a.createElement("input",{onChange:function(e){return h(e.target.files[0])},type:"file"})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement(s.a,{onClick:function(){return function(){var e=new FormData;e.append("file",f),e.append("upload_preset","instagram"),e.append("cloud_name","dmxlnl9ee"),fetch("https://api.cloudinary.com/v1_1/dmxlnl9ee/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){v(e.url)})).catch((function(e){console.log(e)}))}()}},"Post"))},K=function(e,t){return(t.type="USER")?t.payload:(t.type="CLEAR")?null:(t.type="UPDATE")?Object(Z.a)({},e,{followers:t.payload.followers,following:t.payload.following}):(t.type="UPDATEPIC")?Object(Z.a)({},e,{pic:t.payload}):e};var Q=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useContext)(V),i=r.state;return r.dispatch,Object(n.useEffect)((function(){fetch("/getFollowPosts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),o(e.posts)}))}),[]),l.a.createElement("div",{className:"container"},a.map((function(e){return l.a.createElement("div",{key:e._id,className:"container__main"},l.a.createElement("div",{className:"container__header"},l.a.createElement("img",{src:e?e.postedBy.pic:"Loading...",alt:""}),l.a.createElement("h6",null,l.a.createElement(y.b,{to:e.postedBy._id!==i._id?"/profile/".concat(e.postedBy._id):"/profile"},e.postedBy.name)),e.postedBy._id===i._id&&l.a.createElement(z.a,{onClick:function(){return t=e._id,void fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.filter((function(t){return t._id!==e._id}));o(t)}));var t}})),l.a.createElement("div",{className:"container__body"},l.a.createElement("img",{src:e.photo,alt:""}),l.a.createElement("div",{className:"container__bodyIcons"},e.likes.includes(i._id)?l.a.createElement(k.a,{color:"secondary",onClick:function(){var t;t=e._id,fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));o(t)})).catch((function(e){console.log(e)}))}}):l.a.createElement(w.a,{onClick:function(){var t;t=e._id,fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id===e._id?e:t}));o(t)})).catch((function(e){console.log(e)}))}}),l.a.createElement(C.a,null),l.a.createElement(A.a,null)),l.a.createElement("h6",null,e.likes.length," Likes"),l.a.createElement("h6",null,e.title),l.a.createElement("p",null,e.body),e.comments.map((function(e){return l.a.createElement("h6",{key:e._id},l.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy.name)," ",e.text)})),l.a.createElement("hr",null),l.a.createElement("form",{onSubmit:function(t){var n,l;t.preventDefault(),n=t.target[0].value,l=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:l,text:n})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.map((function(t){return t._id===e._id?e:t}));o(t)})).catch((function(e){console.log(e)}))},className:"container__bodyFooter"},l.a.createElement("input",{type:"text",placeholder:"Add a comment..."}),l.a.createElement(s.a,null,"Post"))))})))},V=Object(n.createContext)(),X=function(){var e=Object(_.f)(),t=Object(n.useContext)(V),a=(t.state,t.dispatch);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?a({type:"USER",payload:t}):e.location.pathname.startsWith("/reset")||e.push("/signin")}),[]),l.a.createElement(_.c,null,l.a.createElement(_.a,{exact:!0,path:"/"},l.a.createElement(P,null)),l.a.createElement(_.a,{exact:!0,path:"/profile"},l.a.createElement(T,null)),l.a.createElement(_.a,{path:"/createpost"},l.a.createElement(G,null)),l.a.createElement(_.a,{path:"/signup"},l.a.createElement(F,null)),l.a.createElement(_.a,{path:"/signin"},l.a.createElement(L,null)),l.a.createElement(_.a,{path:"/profile/:userid"},l.a.createElement(q,null)),l.a.createElement(_.a,{path:"/followersposts"},l.a.createElement(Q,null)))};var Y=function(){var e=Object(n.useReducer)(K,null),t=Object(c.a)(e,2),a=t[0],o=t[1];return l.a.createElement(V.Provider,{value:{state:a,dispatch:o}},l.a.createElement("div",{className:"app"},l.a.createElement(y.a,null,l.a.createElement(O,null),l.a.createElement(X,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.1ef65b17.chunk.js.map